var Z=Object.defineProperty,$=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,F=(e,t)=>{for(var o in t||(t={}))k.call(t,o)&&M(e,o,t[o]);if(S)for(var o of S(t))L.call(t,o)&&M(e,o,t[o]);return e},h=(e,t)=>$(e,ee(t));var P=(e,t)=>{var o={};for(var r in e)k.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&S)for(var r of S(e))t.indexOf(r)<0&&L.call(e,r)&&(o[r]=e[r]);return o};import{r as s}from"./vendor-DV1f2hfo.js";import{q as te,c as oe,j as d,b as re,p as ne,d as se,a as U,e as m,z as ce}from"./ui-BaHh_PDK.js";var ae=s.createContext(void 0);function ue(e){const t=s.useContext(ae);return e||t||"ltr"}var G="rovingFocusGroup.onEntryFocus",ie={bubbles:!1,cancelable:!0},g="RovingFocusGroup",[N,B,le]=te(g),[fe,we]=oe(g,[le]),[de,pe]=fe(g),Y=s.forwardRef((e,t)=>d.jsx(N.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(N.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(me,h(F({},e),{ref:t}))})}));Y.displayName=g;var me=s.forwardRef((e,t)=>{const K=e,{__scopeRovingFocusGroup:o,orientation:r,loop:A=!1,dir:_,currentTabStopId:v,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:y,onEntryFocus:p,preventScrollOnEntryFocus:a=!1}=K,R=P(K,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),E=s.useRef(null),C=re(t,E),w=ue(_),[T,b]=ne({prop:v,defaultProp:I!=null?I:null,onChange:y,caller:g}),[n,l]=s.useState(!1),x=se(p),i=B(o),u=s.useRef(!1),[q,O]=s.useState(0);return s.useEffect(()=>{const c=E.current;if(c)return c.addEventListener(G,x),()=>c.removeEventListener(G,x)},[x]),d.jsx(de,{scope:o,orientation:r,dir:w,loop:A,currentTabStopId:T,onItemFocus:s.useCallback(c=>b(c),[b]),onItemShiftTab:s.useCallback(()=>l(!0),[]),onFocusableItemAdd:s.useCallback(()=>O(c=>c+1),[]),onFocusableItemRemove:s.useCallback(()=>O(c=>c-1),[]),children:d.jsx(U.div,h(F({tabIndex:n||q===0?-1:0,"data-orientation":r},R),{ref:C,style:F({outline:"none"},e.style),onMouseDown:m(e.onMouseDown,()=>{u.current=!0}),onFocus:m(e.onFocus,c=>{const J=!u.current;if(c.target===c.currentTarget&&J&&!n){const j=new CustomEvent(G,ie);if(c.currentTarget.dispatchEvent(j),!j.defaultPrevented){const D=i().filter(f=>f.focusable),Q=D.find(f=>f.active),W=D.find(f=>f.id===T),X=[Q,W,...D].filter(Boolean).map(f=>f.ref.current);V(X,a)}}u.current=!1}),onBlur:m(e.onBlur,()=>l(!1))}))})}),z="RovingFocusGroupItem",H=s.forwardRef((e,t)=>{const b=e,{__scopeRovingFocusGroup:o,focusable:r=!0,active:A=!1,tabStopId:_,children:v}=b,I=P(b,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),y=ce(),p=_||y,a=pe(z,o),R=a.currentTabStopId===p,E=B(o),{onFocusableItemAdd:C,onFocusableItemRemove:w,currentTabStopId:T}=a;return s.useEffect(()=>{if(r)return C(),()=>w()},[r,C,w]),d.jsx(N.ItemSlot,{scope:o,id:p,focusable:r,active:A,children:d.jsx(U.span,h(F({tabIndex:R?0:-1,"data-orientation":a.orientation},I),{ref:t,onMouseDown:m(e.onMouseDown,n=>{r?a.onItemFocus(p):n.preventDefault()}),onFocus:m(e.onFocus,()=>a.onItemFocus(p)),onKeyDown:m(e.onKeyDown,n=>{if(n.key==="Tab"&&n.shiftKey){a.onItemShiftTab();return}if(n.target!==n.currentTarget)return;const l=be(n,a.orientation,a.dir);if(l!==void 0){if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return;n.preventDefault();let i=E().filter(u=>u.focusable).map(u=>u.ref.current);if(l==="last")i.reverse();else if(l==="prev"||l==="next"){l==="prev"&&i.reverse();const u=i.indexOf(n.currentTarget);i=a.loop?Fe(i,u+1):i.slice(u+1)}setTimeout(()=>V(i))}}),children:typeof v=="function"?v({isCurrentTabStop:R,hasTabStop:T!=null}):v}))})});H.displayName=z;var ve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ie(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function be(e,t,o){const r=Ie(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ve[r]}function V(e,t=!1){const o=document.activeElement;for(const r of e)if(r===o||(r.focus({preventScroll:t}),document.activeElement!==o))return}function Fe(e,t){return e.map((o,r)=>e[(t+r)%e.length])}var Te=Y,xe=H;export{xe as I,Te as R,we as c,ue as u};
