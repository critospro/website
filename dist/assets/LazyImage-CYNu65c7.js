import{j as t}from"./ui-BaHh_PDK.js";import{r as l}from"./vendor-DV1f2hfo.js";const L=l.memo(({src:r,alt:w,className:b,placeholder:R="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect width='100%25' height='100%25' fill='%23f3f4f6'/%3E%3C/svg%3E",onLoad:o,onError:u,priority:d=!1,eager:c=!1,objectFit:x="cover",fastPreview:e=!0,webpSrc:y,thumbnailSrc:m,thumbnailWebpSrc:f})=>{const[n,j]=l.useState(!1),[I,N]=l.useState(c||e),[i,E]=l.useState(!1),[v,k]=l.useState(e),g=l.useRef(null);l.useEffect(()=>{if(c||e)return;const a=window.innerWidth<768,s=navigator.connection,z=(s==null?void 0:s.effectiveType)==="2g"||(s==null?void 0:s.effectiveType)==="slow-2g"||(s==null?void 0:s.saveData);let p="200px";a&&(p=z?"100px":"400px"),e&&(p=a?"500px":"300px");const h=new IntersectionObserver(([S])=>{S.isIntersecting&&(N(!0),h.disconnect())},{threshold:0,rootMargin:p});return g.current&&h.observe(g.current),()=>h.disconnect()},[c,e]),l.useEffect(()=>{if(d&&r&&!i){const a=document.createElement("link");return a.rel="preload",a.as="image",a.href=r,document.head.appendChild(a),()=>{document.head.contains(a)&&document.head.removeChild(a)}}},[d,r,i]);const C=()=>{j(!0),k(!1),o==null||o()},$=()=>{E(!0),u==null||u()};return t.jsxs("div",{ref:g,className:`relative overflow-hidden ${b}`,children:[v&&e&&!i&&t.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-muted via-muted/80 to-muted/60 animate-pulse transition-all duration-300",style:{backdropFilter:"blur(20px)",backgroundImage:`linear-gradient(45deg, hsl(var(--muted)) 25%, transparent 25%), 
                             linear-gradient(-45deg, hsl(var(--muted)) 25%, transparent 25%), 
                             linear-gradient(45deg, transparent 75%, hsl(var(--muted)) 75%), 
                             linear-gradient(-45deg, transparent 75%, hsl(var(--muted)) 75%)`,backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"},"aria-hidden":"true"}),!n&&!i&&!e&&t.jsx("div",{className:`absolute inset-0 w-full h-full bg-muted animate-pulse transition-opacity duration-200 ${n?"opacity-0":"opacity-100"}`,"aria-hidden":"true"}),v&&e&&!i&&(m||f)&&t.jsxs("picture",{className:"absolute inset-0 w-full h-full",children:[f&&t.jsx("source",{srcSet:f,type:"image/webp"}),m&&t.jsx("img",{src:m,alt:"",className:`w-full h-full object-${x} opacity-60 blur-sm scale-105 transition-all duration-300`,loading:"eager",decoding:"async","aria-hidden":"true"})]}),I&&!i&&t.jsxs("picture",{className:"w-full h-full",children:[y&&t.jsx("source",{srcSet:y,type:"image/webp"}),t.jsx("img",{src:r,alt:w,className:`w-full h-full object-${x} transition-all duration-500 ${n?"opacity-100 scale-100":"opacity-0 scale-105"} ${e?"animate-fade-in":""}`,onLoad:C,onError:$,loading:d||e?"eager":"lazy",decoding:"async",fetchPriority:d||e?"high":"auto",style:{contentVisibility:"auto",containIntrinsicSize:"1px 1000px",filter:n?"none":"blur(5px)",transform:n?"scale(1)":"scale(1.05)"}})]}),i&&t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:t.jsx("span",{className:"text-sm",children:"âš  Image failed to load"})})]})});L.displayName="LazyImage";export{L};
